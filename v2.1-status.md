# WeGo Traffic Source Development Status

## Codebase Rules

- Do not make code changes until we both agree on that action, otherwise we are discussing and planning only
- No heredoc syntax
- No JavaScript forEach, use for..of instead
- JavaScript should be in external files and loaded as ES modules
- Tab indent, WordPress coding style rules

## Completed Features

âœ… **GitHub Auto-Updates** - `class-wego-plugin-updater.php`

- Automatic update checking via GitHub releases
- Plugin details popup with release notes and system info
- See `github-auto-updates.md` for release workflow

## Future Best Practices Fixes

- **CSV filename header:** export_csv() sets Content-Disposition: attachment; filename=... without quoting/encoding. If filename contains spaces or non-ASCII, some clients may mis-handle it.
Recommendation: wrap filename in double quotes or use RFC5987 encoding (filename*). Example: header('Content-Disposition: attachment; filename="' . $filename . '"'); or more robust encoding for UTF-8.

- **Document click listeners (performance):** Currently each configured event type attaches its own `document.click` handler. For performance and clarity prefer a single delegated click handler that iterates configured selectors on each click. This reduces the number of listeners and simplifies event matching.

- **Guarding get_plugin_data():**: get_plugin_data() is an admin helper; calling it when not available may fail. If you need plugin headers at runtime, require the admin include or guard with function_exists().

- **Duplicate DB queries in `add_admin_filter_dropdown()`:**:  the same query pattern is repeated for each meta key. Consider a helper to reduce duplication.

- **Potential PHP notices:**  few places assume array keys exist (e.g., checking $event_type['slug'])

## Future Polish (Optional)

- Reporting dashboard with charts/graphs
- Data cleanup:
  - "Delete All Tracking Data" button on Event Types settings page
  - Deletes posts for known CPTs only (not wildcard `wego_*`)
  - Deletes only plugin-specific options by name

